[gd_scene load_steps=16 format=3 uid="uid://dukca71mfgm5q"]

[ext_resource type="Script" uid="uid://bmd0wu4mh3n8u" path="res://script/main.gd" id="1_choun"]
[ext_resource type="PackedScene" uid="uid://nnf6c1hxa003" path="res://scenes/map.tscn" id="1_jyhfs"]
[ext_resource type="PackedScene" uid="uid://bq3vftd4hwv26" path="res://scenes/player.tscn" id="1_o5qli"]
[ext_resource type="PackedScene" uid="uid://dj3pes45dip6o" path="res://scenes/storys/enemy.tscn" id="2_0wfyh"]
[ext_resource type="PackedScene" uid="uid://clvmo7xnuxar8" path="res://scenes/storys/story_trigger_1.tscn" id="2_o6xl0"]
[ext_resource type="PackedScene" uid="uid://dsdyiuw7p4gos" path="res://scenes/storys/bonfire.tscn" id="2_tefeu"]
[ext_resource type="PackedScene" uid="uid://duysfl7twbggy" path="res://scenes/storys/checkpoint.tscn" id="3_tipki"]
[ext_resource type="Script" uid="uid://dehdi1dk1ymfs" path="res://script/camera001.gd" id="4_jyhfs"]
[ext_resource type="PackedScene" uid="uid://dflu8x1inytoa" path="res://scenes/storyUI.tscn" id="4_tefeu"]
[ext_resource type="PackedScene" uid="uid://dsec6tnqu5fnr" path="res://scenes/storys/camera_area.tscn" id="8_ya4ey"]
[ext_resource type="Shader" uid="uid://c1da1hevyq553" path="res://shader/main.gdshader" id="9_ya4ey"]
[ext_resource type="Shader" uid="uid://cwcvlgqh84ism" path="res://shader/main_alertness.gdshader" id="10_eb6dy"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_trceg"]
shader = ExtResource("10_eb6dy")
shader_parameter/alertness_visual = 0.0
shader_parameter/max_alertness = 120.0
shader_parameter/threshold1 = 40.0
shader_parameter/threshold2 = 70.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_eb6dy"]
shader = ExtResource("9_ya4ey")
shader_parameter/edge_threshold = 0.1
shader_parameter/base_edge_color = Color(0, 0, 0, 1)
shader_parameter/edge_thickness = 1.5
shader_parameter/jitter_strength = 1.5
shader_parameter/noise_speed = 1.5
shader_parameter/pixel_noise_amount = 0.03

[sub_resource type="Environment" id="Environment_jyhfs"]
background_mode = 3
ambient_light_sky_contribution = 0.0
glow_enabled = true
glow_levels/1 = 1.0
glow_levels/2 = 1.0
glow_levels/4 = 1.0
glow_levels/6 = 1.0
glow_levels/7 = 1.0
glow_intensity = 1.08
glow_strength = 0.68
glow_bloom = 0.5
glow_blend_mode = 0
glow_hdr_threshold = 0.9

[node name="Main" type="Node2D"]
script = ExtResource("1_choun")

[node name="Map" parent="." instance=ExtResource("1_jyhfs")]
position = Vector2(-2, 256)
metadata/_edit_lock_ = true

[node name="GlobalLight2D" type="DirectionalLight2D" parent="."]
color = Color(1, 1, 1, 0.415686)
energy = 2.3
blend_mode = 1
metadata/_edit_lock_ = true

[node name="SubContainer" type="SubViewportContainer" parent="."]
offset_right = 40.0
offset_bottom = 40.0
metadata/_edit_lock_ = true

[node name="Sub" type="SubViewport" parent="SubContainer"]
disable_3d = true
transparent_bg = true
handle_input_locally = false
size = Vector2i(11609, 7400)
render_target_update_mode = 4

[node name="Map" parent="SubContainer/Sub" instance=ExtResource("1_jyhfs")]
position = Vector2(-2, 256)
metadata/_edit_lock_ = true

[node name="Enemies" type="Node" parent="."]

[node name="Enemy" parent="Enemies" instance=ExtResource("2_0wfyh")]
position = Vector2(3170, 319)
rotation = 0.733038

[node name="Enemy2" parent="Enemies" instance=ExtResource("2_0wfyh")]
position = Vector2(3527, 799)
rotation = -0.92677

[node name="Enemy3" parent="Enemies" instance=ExtResource("2_0wfyh")]
position = Vector2(3200, 658)
rotation = 1.54462

[node name="players" type="Node" parent="."]

[node name="player" parent="players" instance=ExtResource("1_o5qli")]
position = Vector2(2983, 584)

[node name="Bonfires" type="Node" parent="."]

[node name="bonfire" parent="Bonfires" instance=ExtResource("2_tefeu")]
position = Vector2(3124, 847)

[node name="Stories" type="Node" parent="."]

[node name="StoryTrigger_1" parent="Stories" instance=ExtResource("2_o6xl0")]
position = Vector2(259, 588)
story_lines = Array[String](["hxy是大猪鼻", "hxy小南娘", "要超"])

[node name="Checkpoints" type="Node" parent="."]

[node name="checkpoint" parent="Checkpoints" instance=ExtResource("3_tipki")]
position = Vector2(3087, 575)

[node name="Camera" type="Node" parent="."]

[node name="CameraArea" parent="Camera" instance=ExtResource("8_ya4ey")]
position = Vector2(675.025, 576.805)
scale = Vector2(7.065, 3.235)
zoom = Vector2(4, 4)
metadata/_edit_lock_ = true

[node name="CameraArea2" parent="Camera" instance=ExtResource("8_ya4ey")]
position = Vector2(1916.67, 575.315)
scale = Vector2(5.87, 10.605)
metadata/_edit_lock_ = true

[node name="CameraArea3" parent="Camera" instance=ExtResource("8_ya4ey")]
position = Vector2(2801, 573)
scale = Vector2(3.325, 2.87)
zoom = Vector2(4, 4)
metadata/_edit_lock_ = true

[node name="CameraArea4" parent="Camera" instance=ExtResource("8_ya4ey")]
position = Vector2(3536, 556)
scale = Vector2(4.355, 5.59)
zoom = Vector2(3, 3)
metadata/_edit_lock_ = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="storyUI" parent="CanvasLayer" instance=ExtResource("4_tefeu")]
metadata/_edit_lock_ = true

[node name="alertness" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_trceg")
offset_right = 1920.0
offset_bottom = 1080.0

[node name="Sprite_main" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_eb6dy")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(409, 107)
script = ExtResource("4_jyhfs")
player_path = NodePath("../players/player")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_jyhfs")
